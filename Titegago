-- Whitelist setup
local whitelistedUsers = {
    ["3loodFoss1l"] = true,
    ["tannyy33"] = true -- Added new whitelisted user
}

local player = game:GetService("Players").LocalPlayer
if not whitelistedUsers[player.Name] then
    player:Kick("You are not whitelisted to use this script.")
    return
end

-- UI Setup

-- Key System
local validKey = "
local Players = game:GetService("Players")
local "2nRU2tYQpSzFBw1u6Ypyj1DRvM35z8dt1eVGNbOnfJVufNpytg" -- change this to your desired keyayer = Players.LocalPlayer

-- UI
local screenGui = Instance.new("ScreenGui", player:WaitForChild("PlayerGui"))
screenGui.Name = "KeySystemUI"
local frame = Instance.new("Frame", screenGui)
frame.Size = UDim2.new(0.3, 0, 0.2, 0)
frame.Position = UDim2.new(0.35, 0, 0.4, 0)
frame.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
frame.BorderSizePixel = 0

local title = Instance.new("TextLabel", frame)
title.Size = UDim2.new(1, 0, 0.3, 0)
title.Position = UDim2.new(0, 0, 0, 0)
title.BackgroundTransparency = 1
title.Text = "Enter Access Key"
title.TextColor3 = Color3.fromRGB(255, 255, 255)
title.Font = Enum.Font.SourceSansBold
title.TextScaled = true

local textBox = Instance.new("TextBox", frame)
textBox.Size = UDim2.new(0.8, 0, 0.3, 0)
textBox.Position = UDim2.new(0.1, 0, 0.4, 0)
textBox.PlaceholderText = "Enter Key..."
textBox.Text = ""
textBox.TextScaled = true

local button = Instance.new("TextButton", frame)
button.Size = UDim2.new(0.8, 0, 0.2, 0)
button.Position = UDim2.new(0.1, 0, 0.75, 0)
button.Text = "Submit"
button.BackgroundColor3 = Color3.fromRGB(255, 0, 0)
button.TextColor3 = Color3.fromRGB(255, 255, 255)
button.TextScaled = true

local accessGranted = false
button.MouseButton1Click:Connect(function()
    if textBox.Text == validKey then
        accessGranted = true
        screenGui:Destroy()
    else
        textBox.Text = ""
        textBox.PlaceholderText = "Wrong Key. Try Again."
    end
end)

-- Wait until key is correct
repeat task.wait() until accessGranted


local library = loadstring(game:HttpGet("https://raw.githubusercontent.com/memejames/elerium-v2-ui-library/main/Library", true))()
local window = library:AddWindow("° TANJIN|°", {main_color = Color3.fromRGB(255, 0, 0), min_size = Vector2.new(450, 350), toggle_key = Enum.KeyCode.LeftControl})

local mainTab = window:AddTab("MAIN")
mainTab:Show()

mainTab:AddLabel("♥")

-- Fast Auto Rebirth
autoRebirth = false
mainTab:AddSwitch("Fast Rebirth", function(state)
    autoRebirth = state
    if state then
        task.spawn(function()
            local c = game:GetService("Players").LocalPlayer
            local a = game:GetService("ReplicatedStorage")

            function unequipAllPets()
                for _, folder in pairs(c.petsFolder:GetChildren()) do
                    if folder:IsA("Folder") then
                        for _, pet in pairs(folder:GetChildren()) do
                            a.rEvents.equipPetEvent:FireServer("unequipPet", pet)
                        end
                    end
                end
                task.wait(.1)
            end

            function equipPet(petName)
                unequipAllPets()
                task.wait(.01)
                for _, pet in pairs(c.petsFolder.Unique:GetChildren()) do
                    if pet.Name == petName then
                        a.rEvents.equipPetEvent:FireServer("equipPet", pet)
                    end
                end
            end

            function getMachine(machineName)
                local machine = workspace.machinesFolder:FindFirstChild(machineName)
                if not machine then
                    for _, s in pairs(workspace:GetChildren()) do
                        if s:IsA("Folder") and s.Name:find("machines") then
                            machine = s:FindFirstChild(machineName)
                            if machine then break end
                        end
                    end
                end
                return machine
            end

            function interact()
                local u = game:GetService("VirtualInputManager")
                u:SendKeyEvent(true, "E", false, game)
                task.wait(.1)
                u:SendKeyEvent(false, "E", false, game)
            end

            local v = c.leaderstats.Rebirths.Value
            local w = 10000 + (5000 * v)
            if c.ultimatesFolder:FindFirstChild("Golden Rebirth") then
                local x = c.ultimatesFolder["Golden Rebirth"].Value
                w = math.floor(w * (1 - (x * 0.1)))
            end

            unequipAllPets()
            task.wait(.1)
            equipPet("Swift Samurai")

            while c.leaderstats.Strength.Value < w do
                for _ = 1, 10 do
                    c.muscleEvent:FireServer("rep")
                end
                task.wait()
            end

            unequipAllPets()
            task.wait(.1)
            equipPet("Tribal Overlord")

            local z = getMachine("Jungle Bar Lift")
            if z and z:FindFirstChild("interactSeat") then
                c.Character.HumanoidRootPart.CFrame = z.interactSeat.CFrame * CFrame.new(0, 3, 0)
                repeat task.wait(.1) interact() until c.Character.Humanoid.Sit
            end

            local A = c.leaderstats.Rebirths.Value
            repeat
                a.rEvents.rebirthRemote:InvokeServer("rebirthRequest")
                task.wait(.1)
            until c.leaderstats.Rebirths.Value > A

            task.wait()
        end)
    end
end)

-- Target Rebirth Auto Stop
local targetRebirths = 0
local autoRebirthToTarget = false

mainTab:AddTextBox("Target Rebirths", function(value)
    local number = tonumber(value)
    if number and number >= 0 then
        targetRebirths = number
        print("Target rebirths set to:", targetRebirths)
    else
        warn("Invalid input for rebirths. Please enter a non-negative number.")
    end
end, {
    clear_text_on_focus = true,
    text = tostring(targetRebirths),
    placeholder = "Enter desired rebirths"
})

mainTab:AddSwitch("Auto Rebirth to Target", function(state)
    autoRebirthToTarget = state
    print("Auto Rebirth to Target:", state and "Enabled" or "Disabled")

    if state then
        task.spawn(function()
            local player = game:GetService("Players").LocalPlayer
            local rebirthRemote = game:GetService("ReplicatedStorage").rEvents.rebirthRemote
            local rebirths = player.leaderstats:WaitForChild("Rebirths")

            while autoRebirthToTarget do
                if tonumber(rebirths.Value) >= targetRebirths then
                    print("Target reached! Auto Rebirth to Target disabled.")
                    autoRebirthToTarget = false
                    break
                end
                rebirthRemote:InvokeServer("rebirthRequest")
                task.wait(1)
            end
        end)
    end
end)

-- Anti-AFK
mainTab:AddButton("Anti-AFK (Click Me)", function()
    loadstring(game:HttpGet('https://pastebin.com/raw/TRCYuX46'))()
    print("Anti-AFK script executed.")
end)

-- Lock Position
local lockPositionEnabled = false
local lockedCFrame = nil
mainTab:AddSwitch("Lock Position", function(state)
    lockPositionEnabled = state
    if state then
        local localPlayer = game:GetService("Players").LocalPlayer
        if localPlayer and localPlayer.Character and localPlayer.Character:FindFirstChild("HumanoidRootPart") then
            lockedCFrame = localPlayer.Character.HumanoidRootPart.CFrame
        end

        task.spawn(function()
            while lockPositionEnabled do
                if localPlayer.Character and localPlayer.Character:FindFirstChild("HumanoidRootPart") and lockedCFrame then
                    localPlayer.Character.HumanoidRootPart.CFrame = lockedCFrame
                end
                task.wait(0.05)
            end
        end)
    end
end)

-- Simple Rebirth
local normalAutoRebirth = false
mainTab:AddSwitch("Auto Rebirth (Simple)", function(state)
    normalAutoRebirth = state
    if state then
        task.spawn(function()
            local rebirthRemote = game:GetService("ReplicatedStorage").rEvents.rebirthRemote
            while normalAutoRebirth do
                rebirthRemote:InvokeServer("rebirthRequest")
                task.wait(1)
            end
        end)
    end
end)

-- Farming Tab
local farmingTab = window:AddTab("Farming")

-- Smart Grind (Fast Strength)
farmingTab:AddSwitch("Fast Strength", function(state)
    _G.SmartGrind = state
    if state then
        task.spawn(function()
            local player = game:GetService("Players").LocalPlayer
            local muscleEvent = player.muscleEvent
            local swiftSamurais = {}

            for _, pet in pairs(player.petsFolder.Unique:GetChildren()) do
                if pet.Name == "Swift Samurai" then
                    table.insert(swiftSamurais, pet)
                end
            end

            game:GetService("ReplicatedStorage").rEvents.equipPetEvent:FireServer("equipMultiPet", swiftSamurais)

            while _G.SmartGrind do
                for i = 1, 100 do
                    muscleEvent:FireServer("rep")
                end
                task.wait(0.01)

                for i = 1, 50 do
                    muscleEvent:FireServer("rep")
                end
                task.wait(0.01)

                for i = 1, 10 do
                    muscleEvent:FireServer("rep")
                end
                task.wait(0.01)

                if math.random(1, 20) == 1 then
                    task.wait(math.random(0.1, 0.3))
                end
            end

            game:GetService("ReplicatedStorage").rEvents.equipPetEvent:FireServer("unequipAllPets")
        end)
    end
end)

-- Simple Auto Strength
local autoStrength = false
farmingTab:AddSwitch("Auto Strength (Simple)", function(state)
    autoStrength = state
    if state then
        task.spawn(function()
            local player = game:GetService("Players").LocalPlayer
            local muscleEvent = player.muscleEvent
            while autoStrength do
                muscleEvent:FireServer("rep")
                task.wait(0.05)
            end
        end)
    end
end)

-- Set Time (Day/Night)
local isDay = true
farmingTab:AddSwitch("Set Time (Day/Night)", function(state)
    isDay = state
    if isDay then
        game.Lighting.TimeOfDay = "14:00:00" -- Day
        print("Time set to Day.")
    else
        game.Lighting.TimeOfDay = "00:00:00" -- Night
        print("Time set to Night.")
    end
end)
